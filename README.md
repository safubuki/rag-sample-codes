# LLMæƒ…å ±æä¾›æ‰‹æ³•æ¯”è¼ƒã‚·ã‚¹ãƒ†ãƒ 

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€LLMã«å¤–éƒ¨æƒ…å ±ã‚’ä¸ãˆã‚‹ãŸã‚ã®**5ã¤ã®ä¸»è¦æ‰‹æ³•ã‚’çµ±ä¸€ç’°å¢ƒã§æ¯”è¼ƒãƒ»æ¤œè¨¼**ã§ãã‚‹**ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã§ã™ã€‚

## ğŸ¯ èƒŒæ™¯ã¨ç›®çš„

ç¾ä»£ã®LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«ãŠã„ã¦ã€å¤–éƒ¨æƒ…å ±ã®æä¾›æ–¹æ³•ã¯æˆåŠŸã®éµã¨ãªã‚Šã¾ã™ã€‚æœ¬ã‚·ã‚¹ãƒ†ãƒ ã§ã¯ä»¥ä¸‹ã®5ã¤ã®ä¸»è¦ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å®Ÿè£…ã—ã€åŒä¸€æ¡ä»¶ã§ã®æ¯”è¼ƒã‚’å¯èƒ½ã«ã—ã¦ã„ã¾ã™ï¼š

1. **LLMå˜ä½“åˆ©ç”¨**: ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ç¢ºèª
2. **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¹ã‚¿ãƒƒãƒ•ã‚£ãƒ³ã‚°**: å…¨æƒ…å ±åŸ‹ã‚è¾¼ã¿
3. **RAGã®ã¿**: ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã«ã‚ˆã‚‹åŠ¹ç‡çš„æ¤œç´¢
4. **Function Calling**: LLMã®è‡ªå¾‹çš„ãƒ„ãƒ¼ãƒ«åˆ©ç”¨
5. **RAG + Function Calling**: è¤‡åˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼ˆæ¨å¥¨ï¼‰

å„æ‰‹æ³•ã®**åŠ¹ç‡æ€§ãƒ»ç²¾åº¦ãƒ»æŸ”è»Ÿæ€§**ã‚’å®šé‡çš„ãƒ»å®šæ€§çš„ã«æ¯”è¼ƒã—ã€å®Ÿç”¨çš„ãªçŸ¥è¦‹ã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## âœ¨ ä¸»ãªç‰¹å¾´

- **çµ±ä¸€ç’°å¢ƒã§ã®æ¯”è¼ƒ**: åŒä¸€ãƒ‡ãƒ¼ã‚¿ãƒ»åŒä¸€è³ªå•ã§ã®å…¬æ­£ãªæ¯”è¼ƒ
- **ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯Webã‚¢ãƒ—ãƒª**: Pythonã®FastAPIãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ + Next.jsãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†**: å‡¦ç†çŠ¶æ³ãƒ»ä¸­é–“ç”Ÿæˆç‰©ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º
- **è©³ç´°ãªåˆ†ææ©Ÿèƒ½**: ãƒˆãƒ¼ã‚¯ãƒ³æ•°ãƒ»å‡¦ç†æ™‚é–“ãƒ»å®Ÿè¡Œãƒ­ã‚°ã®è©³ç´°è¡¨ç¤º
- **ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰**: ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®é…å»¶è¡¨ç¤ºæ©Ÿèƒ½
- **ç·¨é›†å¯èƒ½KB**: ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã‚’ç›´æ¥ç·¨é›†å¯èƒ½

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### å‰ææ¡ä»¶

- Python 3.10ä»¥ä¸Š
- Node.js 18ä»¥ä¸Š
- Google Cloud Projectï¼ˆVertex AI APIæœ‰åŠ¹åŒ–ï¼‰

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### å‰ææ¡ä»¶

- Python 3.10ä»¥ä¸Š
- Node.js 18ä»¥ä¸Š
- Google Cloud Projectï¼ˆVertex AI APIæœ‰åŠ¹åŒ–ï¼‰

### ğŸ“‹ æœ€çŸ­è¨­å®šæ‰‹é †

> **âš ï¸ é‡è¦**: Google Cloud APIã®è¨­å®šãŒå¿…è¦ã§ã™ã€‚è©³ç´°ãªæ‰‹é †ã¯ **[ğŸ“‹ äº‹å‰æº–å‚™: Google Cloud AI APIè¨­å®š](#ğŸ“‹-äº‹å‰æº–å‚™-google-cloud-ai-apiè¨­å®š)** ã‚’ã”è¦§ãã ã•ã„ã€‚

#### 1. Google Cloudè¨­å®šï¼ˆå¿…é ˆï¼‰
- [Google Cloud Console](https://console.cloud.google.com/)ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- Vertex AI APIã‚’æœ‰åŠ¹åŒ–
- ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

#### 2. èªè¨¼è¨­å®šï¼ˆå¿…é ˆï¼‰
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã‚’è¨˜è¼‰ï¼š

```bash
GOOGLE_CLOUD_PROJECT=your-actual-project-id
GOOGLE_APPLICATION_CREDENTIALS=./service-account-key.json
```

> **ğŸ’¡ è¨­å®šã®ãƒã‚¤ãƒ³ãƒˆ**  
> - `GOOGLE_CLOUD_PROJECT`: ä½œæˆã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ID
> - `GOOGLE_APPLICATION_CREDENTIALS`: ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸJSONã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹
> - è©³ç´°ãªè¨­å®šæ–¹æ³•ã¯ **[äº‹å‰æº–å‚™ã‚»ã‚¯ã‚·ãƒ§ãƒ³](#ğŸ“‹-äº‹å‰æº–å‚™-google-cloud-ai-apiè¨­å®š)** ã§èª¬æ˜ã—ã¦ã„ã¾ã™

### ğŸ”§ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»å®Ÿè¡Œ

#### åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆåˆã‚ã¦å®Ÿè¡Œã™ã‚‹å ´åˆï¼‰

```bash
# 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ï¼ˆGitHubã‹ã‚‰å–å¾—ã—ãŸå ´åˆï¼‰
git clone <repository-url>
cd rag-sample-codes

# 2. èªè¨¼è¨­å®šï¼ˆå¿…é ˆï¼‰
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«.envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä¸Šè¨˜ã®å†…å®¹ã‚’è¨˜è¼‰

# 3. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ç’°å¢ƒæ§‹ç¯‰
python -m venv .venv
.venv\Scripts\activate  # Windows
# source .venv/bin/activate  # Linux/Mac
pip install -r src/backend/requirements.txt

# 4. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç’°å¢ƒæ§‹ç¯‰
cd src/frontend
npm install
cd ..

# 5. åˆå›å®Ÿè¡Œãƒ†ã‚¹ãƒˆ
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«1: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•
python src/backend/main.py

# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«2: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•ï¼ˆæ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ï¼‰
cd src/frontend
npm run dev
```

#### é€šå¸¸å®Ÿè¡Œï¼ˆ2å›ç›®ä»¥é™ï¼‰

ä¸€åº¦ç’°å¢ƒæ§‹ç¯‰ãŒå®Œäº†ã—ã¦ã„ã‚Œã°ã€ä»¥ä¸‹ã®ç°¡å˜ãªæ‰‹é †ã§èµ·å‹•ã§ãã¾ã™ï¼š

```bash
# 1. Pythonä»®æƒ³ç’°å¢ƒã‚’æœ‰åŠ¹åŒ–
.venv\Scripts\activate  # Windows
# source .venv/bin/activate  # Linux/Mac

# 2. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•ï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«1ï¼‰
python src/backend/main.py

# 3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•ï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«2ï¼‰
cd src/frontend
npm run dev
```

> **ğŸš€ ä¸€æ‹¬èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**  
> æ¯å›ã®èµ·å‹•ã‚’ç°¡å˜ã«ã™ã‚‹ãŸã‚ã€è©³ç´°ãª **[ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»å®Ÿè¡Œæ‰‹é †](#ğŸš€-ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»å®Ÿè¡Œæ‰‹é †)** ã§ã¯ä¸€æ‹¬èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚‚ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚

### ğŸŒ ã‚¢ã‚¯ã‚»ã‚¹

ã‚·ã‚¹ãƒ†ãƒ ãŒæ­£å¸¸ã«èµ·å‹•ã—ãŸã‚‰ã€ä»¥ä¸‹ã®URLã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ï¼š

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: <http://localhost:3000>
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API**: <http://localhost:8000>
- **APIä»•æ§˜æ›¸**: <http://localhost:8000/docs>

### ğŸ“– åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•

1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ <http://localhost:3000> ã«ã‚¢ã‚¯ã‚»ã‚¹
2. å‡¦ç†ãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠï¼ˆ5ã¤ã®æ‰‹æ³•ã‹ã‚‰ï¼‰
3. è³ªå•ã‚’å…¥åŠ›ï¼ˆä¾‹: ã€Œã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰E-404ã®å¯¾å‡¦æ³•ã¯ï¼Ÿã€ï¼‰
4. ã€Œé€ä¿¡ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
5. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å‡¦ç†çŠ¶æ³ãƒ»çµæœãƒ»ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’ç¢ºèª
6. å¿…è¦ã«å¿œã˜ã¦ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã‚’ç·¨é›†
7. å®Ÿè¡Œãƒ­ã‚°ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

> **ğŸ”— è©³ç´°ãªè¨­å®šæƒ…å ±**  
> ã‚ˆã‚Šè©³ã—ã„ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ã‚„è¨­å®šæ–¹æ³•ã«ã¤ã„ã¦ã¯ã€**[ğŸ“‹ äº‹å‰æº–å‚™: Google Cloud AI APIè¨­å®š](#ğŸ“‹-äº‹å‰æº–å‚™-google-cloud-ai-apiè¨­å®š)** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã”å‚ç…§ãã ã•ã„ã€‚

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

<details>
<summary>ğŸ’¡ <strong>ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•</strong>ï¼ˆã‚¯ãƒªãƒƒã‚¯ã—ã¦å±•é–‹ï¼‰</summary>

#### èµ·å‹•æ™‚ã«ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼: `ModuleNotFoundError`**
```bash
# ä»®æƒ³ç’°å¢ƒãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ãªã„å¯èƒ½æ€§
.venv\Scripts\activate  # Windows
pip install -r src/backend/requirements.txt
```

**ã‚¨ãƒ©ãƒ¼: `Port 3000 is already in use`**
```bash
# åˆ¥ã®ãƒãƒ¼ãƒˆã§èµ·å‹•
cd src/frontend
npm run dev -- --port 3001
```

**ã‚¨ãƒ©ãƒ¼: Google Cloudèªè¨¼ã‚¨ãƒ©ãƒ¼**
- `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®šã‚’ç¢ºèª
- ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’ç¢ºèª
- è©³ç´°ã¯ã€ŒGoogle Cloud & LLM æ¥ç¶šãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚ç…§

</details>

### ã‚·ã‚¹ãƒ†ãƒ åœæ­¢æ–¹æ³•

```bash
# å„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ Ctrl+C ã‚’æŠ¼ã™ã‹ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‰ã˜ã‚‹
# Windowsã®å ´åˆã¯ã‚¿ã‚¹ã‚¯ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‹ã‚‰ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½
```

## ğŸ”§ 5ã¤ã®æ‰‹æ³•ã®æ¦‚è¦

### æ‰‹æ³•1: LLMå˜ä½“åˆ©ç”¨ï¼ˆãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ï¼‰

**å¤–éƒ¨æƒ…å ±ãªã—**ã§LLMã®å†…è”µçŸ¥è­˜ã®ã¿ã‚’æ´»ç”¨ã€‚æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã§é«˜é€Ÿã§ã™ãŒã€çŸ¥è­˜ã®ç¯„å›²ã¨é®®åº¦ã«åˆ¶é™ãŒã‚ã‚Šã¾ã™ã€‚

### æ‰‹æ³•2: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¹ã‚¿ãƒƒãƒ•ã‚£ãƒ³ã‚°

**å…¨æƒ…å ±ã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«åŸ‹ã‚è¾¼ã¿**ã€‚ç¢ºå®Ÿã§ç†è§£ã—ã‚„ã™ã„æ‰‹æ³•ã§ã™ãŒã€å¤§é‡ãƒ‡ãƒ¼ã‚¿ã§ã¯ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ãŒèª²é¡Œã¨ãªã‚Šã¾ã™ã€‚

### æ‰‹æ³•3: RAGã®ã¿

**ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã«ã‚ˆã‚‹é–¢é€£æƒ…å ±å–å¾—**ã€‚åŠ¹ç‡çš„ã§æ‹¡å¼µæ€§ãŒé«˜ãã€ç¾ä»£çš„ãªRAGã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®åŸºæœ¬å½¢ã§ã™ã€‚

### æ‰‹æ³•4: Function Callingã®ã¿

**LLMã®è‡ªå¾‹çš„ãƒ„ãƒ¼ãƒ«é¸æŠãƒ»å®Ÿè¡Œ**ã€‚å‹•çš„ã§æŸ”è»Ÿãªæƒ…å ±æ¤œç´¢ãŒå¯èƒ½ã§ã™ãŒã€ãƒ„ãƒ¼ãƒ«è¨­è¨ˆã®å“è³ªã«ä¾å­˜ã—ã¾ã™ã€‚

### æ‰‹æ³•5: RAG + Function Callingï¼ˆæ¨å¥¨ï¼‰

**RAGã¨Function Callingã®çµ„ã¿åˆã‚ã›**ã€‚æœ€ã‚‚æŸ”è»Ÿã§å®Ÿç”¨çš„ã§ã™ãŒã€è¤‡é›‘æ€§ãŒå¢—åŠ ã—ã¾ã™ã€‚

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### å…¨ä½“ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```mermaid
graph TD
    Frontend[ğŸ–¥ï¸ Next.js Frontend<br/>TypeScript + Tailwind CSS<br/>Port: 3000] 
    Backend[âš¡ FastAPI Backend<br/>Python + LangChain<br/>Port: 8000]
    
    Frontend -.->|HTTP API| Backend
    Backend -.->|JSON Response| Frontend
    
    Backend --> Controller{ğŸ”„ RAG Engines<br/>åˆ¶å¾¡ãƒ¬ã‚¤ãƒ¤ãƒ¼<br/>5ã¤ã®æ‰‹æ³•ã‚’åˆ‡ã‚Šæ›¿ãˆ}
    
    Controller -->|æ‰‹æ³•ã«å¿œã˜ã¦é¸æŠ| LLM[ğŸ¤– Vertex AI<br/>Gemini 2.5 Flash]
    Controller -->|RAGç³»ã§ä½¿ç”¨| Vector[ğŸ—„ï¸ FAISS<br/>Vector Store]
    Controller -->|RAGç³»ã§ä½¿ç”¨| Embed[ğŸ”¤ HuggingFace<br/>Embeddings]
    Controller -->|Function Callingç³»ã§ä½¿ç”¨| Tools[ğŸ”§ LangChain<br/>Function Tools]
    Controller -->|æ‰‹æ³•5ã§ä½¿ç”¨| Agent[ğŸ¯ LangChain<br/>Agent Executor]
    
    Tools -.->|RAGæ©Ÿèƒ½ã¨ã—ã¦| Vector
    Tools -.->|RAGæ©Ÿèƒ½ã¨ã—ã¦| Embed
    Agent -.->|ãƒ„ãƒ¼ãƒ«ç®¡ç†| Tools
    Agent -.->|LLMå‘¼ã³å‡ºã—| LLM
    
    Backend --> Storage[(ğŸ“ File System)]
    Storage --> KB[ğŸ“š knowledge.txt]
    Storage --> Logs[ğŸ“Š Execution Logs]
    
    Tools -.->|ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹| KB
    
    style Frontend fill:#e8f5e8,color:#000
    style Backend fill:#fff3e0,color:#000
    style Controller fill:#f0f4c3,color:#000,stroke:#666,stroke-width:3px
    style LLM fill:#e1f5fe,color:#000
    style Vector fill:#e8eaf6,color:#000
    style Embed fill:#f1f8e9,color:#000
    style Tools fill:#fff8e1,color:#000
    style Agent fill:#ffebee,color:#000
    style KB fill:#fce4ec,color:#000
    style Logs fill:#f3e5f5,color:#000
    style Storage fill:#e0f2e1,color:#000
```

### æ§‹æˆè¦ç´ ã®èª¬æ˜

| è¦ç´  | å½¹å‰² | æŠ€è¡“è©³ç´° |
|------|------|----------|
| ğŸ–¥ï¸ **Next.js Frontend** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ | TypeScript + Tailwind CSSã€ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ |
| âš¡ **FastAPI Backend** | API ã‚µãƒ¼ãƒãƒ¼ | Pythonã€LangChainçµ±åˆã€CORSå¯¾å¿œ |
| ğŸ”„ **RAG Enginesï¼ˆåˆ¶å¾¡ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼‰** | æ‰‹æ³•åˆ‡ã‚Šæ›¿ãˆåˆ¶å¾¡ | 5ã¤ã®æƒ…å ±æä¾›ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’çµ±ä¸€çš„ã«ç®¡ç†ãƒ»å®Ÿè¡Œ |
| ğŸ¤– **Vertex AI LLM** | è¨€èªãƒ¢ãƒ‡ãƒ« | Google Gemini 2.5 Flashã€ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ |
| ğŸ—„ï¸ **FAISS Vector Store** | ãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | é«˜é€Ÿé¡ä¼¼æ¤œç´¢ã€æ–‡æ›¸ã®åŸ‹ã‚è¾¼ã¿ä¿å­˜ |
| ğŸ”¤ **HuggingFace Embeddings** | ãƒ†ã‚­ã‚¹ãƒˆåŸ‹ã‚è¾¼ã¿ | sentence-transformersã€ãƒ™ã‚¯ãƒˆãƒ«å¤‰æ› |
| ğŸ”§ **Function Tools** | å‹•çš„ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ | LangChainãƒ„ãƒ¼ãƒ«ã€Knowledge Baseæ¤œç´¢ |
| ğŸ¯ **Agent Executor** | è¤‡æ•°ãƒ„ãƒ¼ãƒ«ç®¡ç† | LangChainã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€æˆ¦ç•¥çš„å®Ÿè¡Œ |
| ğŸ“š **knowledge.txt** | ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ | è£½å“å–æ‰±èª¬æ˜æ›¸ã€å…±é€šãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ |
| ğŸ“Š **Execution Logs** | å®Ÿè¡Œãƒ­ã‚° | JSONLå½¢å¼ã€è©³ç´°ãªå‡¦ç†å±¥æ­´ |

### æ‰‹æ³•åˆ¥ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³ï¼ˆé™çš„ãªé–¢ä¿‚æ€§ï¼‰

å„æƒ…å ±æä¾›æ‰‹æ³•ã®é™çš„ãªæ§‹æˆè¦ç´ ã¨é–¢ä¿‚æ€§ã‚’å¯è¦–åŒ–ï¼š

#### æ‰‹æ³•1: LLMå˜ä½“åˆ©ç”¨

```mermaid
graph LR
    User[ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼] --> UI[ğŸ–¥ï¸ WebUI]
    UI --> API[âš¡ FastAPI]
    API --> LLM[ğŸ¤– Gemini LLM]
    LLM --> API
    API --> UI
    UI --> User
    
    style LLM fill:#e1f5fe,color:#000
    style User fill:#f3e5f5,color:#000
    style UI fill:#e8f5e8,color:#000
    style API fill:#fff3e0,color:#000
```

**ç‰¹å¾´**: æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹æˆã€‚å¤–éƒ¨æƒ…å ±æºã¯ä¸€åˆ‡ä½¿ç”¨ã›ãšã€LLMã®å†…è”µçŸ¥è­˜ã®ã¿ã§å›ç­”ã‚’ç”Ÿæˆã—ã¾ã™ã€‚å‡¦ç†é€Ÿåº¦ã¯æœ€ã‚‚é«˜é€Ÿã§ã™ãŒã€çŸ¥è­˜ã®ç¯„å›²ãŒé™å®šçš„ã§ã™ã€‚

#### æ‰‹æ³•2: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¹ã‚¿ãƒƒãƒ•ã‚£ãƒ³ã‚°

```mermaid
graph LR
    User[ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼] --> UI[ğŸ–¥ï¸ WebUI]
    UI --> API[âš¡ FastAPI]
    API --> KB[ğŸ“š Knowledge Base]
    KB --> API
    API --> LLM[ğŸ¤– Gemini LLM]
    LLM --> API
    API --> UI
    UI --> User
    
    style LLM fill:#e1f5fe,color:#000
    style KB fill:#fce4ec,color:#000
    style User fill:#f3e5f5,color:#000
    style UI fill:#e8f5e8,color:#000
    style API fill:#fff3e0,color:#000
```

**ç‰¹å¾´**: Knowledge Baseã‹ã‚‰å…¨ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã€è³ªå•ã¨ä¸€ç·’ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«åŸ‹ã‚è¾¼ã¿ã¾ã™ã€‚ç¢ºå®Ÿã§ç†è§£ã—ã‚„ã™ã„æ‰‹æ³•ã§ã™ãŒã€ãƒ‡ãƒ¼ã‚¿é‡ãŒå¤šã„å ´åˆã¯ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»é‡ãŒå¤§ãããªã‚Šã¾ã™ã€‚

#### æ‰‹æ³•3: RAGã®ã¿

```mermaid
graph LR
    User[ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼] --> UI[ğŸ–¥ï¸ WebUI]
    UI --> API[âš¡ FastAPI]
    API --> Embed[ğŸ”¤ Embeddings]
    Embed --> VectorDB[(ğŸ—„ï¸ Vector Store)]
    VectorDB --> API
    API --> LLM[ğŸ¤– Gemini LLM]
    LLM --> API
    API --> UI
    UI --> User
    
    style LLM fill:#e1f5fe,color:#000
    style VectorDB fill:#e8eaf6,color:#000
    style Embed fill:#f1f8e9,color:#000
    style User fill:#f3e5f5,color:#000
    style UI fill:#e8f5e8,color:#000
    style API fill:#fff3e0,color:#000
```

**ç‰¹å¾´**: è³ªå•ã‚’Embeddingsã§ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã—ã€Vector Storeã‹ã‚‰é–¢é€£æ€§ã®é«˜ã„æ–‡æ›¸ã‚’æ¤œç´¢ã—ã¦å›ç­”ã«æ´»ç”¨ã—ã¾ã™ã€‚åŠ¹ç‡çš„ã§æ‹¡å¼µæ€§ãŒé«˜ãã€ç¾ä»£çš„ãªRAGã®åŸºæœ¬å½¢ã§ã™ã€‚

#### æ‰‹æ³•4: Function Callingã®ã¿

```mermaid
graph LR
    User[ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼] --> UI[ğŸ–¥ï¸ WebUI]
    UI --> API[âš¡ FastAPI]
    API --> LLM[ğŸ¤– Gemini LLM]
    LLM --> Tools[ğŸ”§ Function Tools]
    Tools --> KB[ğŸ“š Knowledge Base]
    KB --> Tools
    Tools --> LLM
    LLM --> API
    API --> UI
    UI --> User
    
    style LLM fill:#e1f5fe,color:#000
    style Tools fill:#fff8e1,color:#000
    style KB fill:#fce4ec,color:#000
    style User fill:#f3e5f5,color:#000
    style UI fill:#e8f5e8,color:#000
    style API fill:#fff3e0,color:#000
```

**ç‰¹å¾´**: LLMãŒè‡ªå¾‹çš„ã«Function Toolsã‚’é¸æŠãƒ»å®Ÿè¡Œã—ã¦Knowledge Baseã‹ã‚‰å¿…è¦ãªæƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚LLMã®åˆ¤æ–­åŠ›ã‚’æ´»ç”¨ã—ãŸå‹•çš„ãªæƒ…å ±æ¤œç´¢ãŒå¯èƒ½ã§ã™ã€‚

#### æ‰‹æ³•5: RAG + Function Callingï¼ˆæ¨å¥¨ï¼‰

```mermaid
graph LR
    User[ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼] --> UI[ğŸ–¥ï¸ WebUI]
    UI --> API[âš¡ FastAPI]
    API --> Agent[ğŸ¯ Agent Executor]
    Agent --> LLM[ğŸ¤– Gemini LLM]
    LLM --> Agent
    Agent --> Tools[ğŸ”§ Function Tools]
    Tools --> Embed[ğŸ”¤ Embeddings]
    Tools --> VectorDB[(ğŸ—„ï¸ Vector Store)]
    Tools --> KB[ğŸ“š Knowledge Base]
    Embed --> VectorDB
    VectorDB --> Tools
    KB --> Tools
    Tools --> Agent
    Agent --> API
    API --> UI
    UI --> User
    
    style LLM fill:#e1f5fe,color:#000
    style Agent fill:#ffebee,color:#000
    style Tools fill:#fff8e1,color:#000
    style VectorDB fill:#e8eaf6,color:#000
    style Embed fill:#f1f8e9,color:#000
    style KB fill:#fce4ec,color:#000
    style User fill:#f3e5f5,color:#000
    style UI fill:#e8f5e8,color:#000
    style API fill:#fff3e0,color:#000
```

**ç‰¹å¾´**: Agent ExecutorãŒLLMã¨Function Toolsã‚’ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã€å¿…è¦ã«å¿œã˜ã¦RAGæ¤œç´¢ï¼ˆEmbeddings + Vector Storeï¼‰ã¨ç›´æ¥çš„ãªKnowledge Baseæ¤œç´¢ã®ä¸¡æ–¹ã‚’æ´»ç”¨ã—ã¾ã™ã€‚æœ€ã‚‚æŸ”è»Ÿã§é«˜åº¦ãªæƒ…å ±æ¤œç´¢ãŒå¯èƒ½ãªæ¨å¥¨æ‰‹æ³•ã§ã™ã€‚

## ğŸ“Š æ‰‹æ³•åˆ¥å‹•çš„ãƒ•ãƒ­ãƒ¼ï¼ˆã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ï¼‰

é™çš„ãªæ§‹æˆå›³ã®ç†è§£ã«ç¶šã„ã¦ã€å„æ‰‹æ³•ã®å‹•çš„ãªå‡¦ç†ãƒ•ãƒ­ãƒ¼ã‚’ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã§èª¬æ˜ã—ã¾ã™ï¼š

### æ‰‹æ³•1ã‚·ãƒ¼ã‚±ãƒ³ã‚¹: LLMå˜ä½“åˆ©ç”¨

```mermaid
sequenceDiagram
    participant User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant UI as WebUI
    participant API as FastAPI
    participant LLM as Gemini LLM
    
    User->>UI: è³ªå•å…¥åŠ›
    UI->>API: POST /process (llm_only)
    API->>LLM: è³ªå•ã‚’ãã®ã¾ã¾é€ä¿¡
    LLM->>API: å›ç­”ç”Ÿæˆ
    API->>UI: çµæœè¿”å´
    UI->>User: å›ç­”è¡¨ç¤º
    
    Note over LLM: å¤–éƒ¨æƒ…å ±ãªã—<br/>å†…è”µçŸ¥è­˜ã®ã¿
```

### æ‰‹æ³•2ã‚·ãƒ¼ã‚±ãƒ³ã‚¹: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¹ã‚¿ãƒƒãƒ•ã‚£ãƒ³ã‚°

```mermaid
sequenceDiagram
    participant User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant UI as WebUI
    participant API as FastAPI
    participant KB as Knowledge Base
    participant LLM as Gemini LLM
    
    User->>UI: è³ªå•å…¥åŠ›
    UI->>API: POST /process (prompt_stuffing)
    API->>KB: å…¨ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
    KB->>API: knowledge.txtå…¨æ–‡
    API->>LLM: è³ªå•+å…¨æƒ…å ±ã‚’çµåˆé€ä¿¡
    LLM->>API: å›ç­”ç”Ÿæˆ
    API->>UI: çµæœè¿”å´
    UI->>User: å›ç­”è¡¨ç¤º
    
    Note over KB,LLM: å…¨æƒ…å ±ã‚’<br/>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«åŸ‹ã‚è¾¼ã¿
```

### æ‰‹æ³•3ã‚·ãƒ¼ã‚±ãƒ³ã‚¹: RAGã®ã¿

```mermaid
sequenceDiagram
    participant User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant UI as WebUI
    participant API as FastAPI
    participant VectorDB as Vector Store
    participant Embed as Embeddings
    participant LLM as Gemini LLM
    
    User->>UI: è³ªå•å…¥åŠ›
    UI->>API: POST /process (rag_only)
    API->>Embed: è³ªå•ã‚’ãƒ™ã‚¯ãƒˆãƒ«åŒ–
    Embed->>API: è³ªå•ãƒ™ã‚¯ãƒˆãƒ«
    API->>VectorDB: é¡ä¼¼æ¤œç´¢
    VectorDB->>API: é–¢é€£æ–‡æ›¸
    API->>LLM: è³ªå•+é–¢é€£æ–‡æ›¸
    LLM->>API: å›ç­”ç”Ÿæˆ
    API->>UI: çµæœè¿”å´
    UI->>User: å›ç­”è¡¨ç¤º
    
    Note over VectorDB: FAISS<br/>ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢
```

### æ‰‹æ³•4ã‚·ãƒ¼ã‚±ãƒ³ã‚¹: Function Callingã®ã¿

```mermaid
sequenceDiagram
    participant User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant UI as WebUI
    participant API as FastAPI
    participant LLM as Gemini LLM
    participant Tools as Function Tools
    participant KB as Knowledge Base
    
    User->>UI: è³ªå•å…¥åŠ›
    UI->>API: POST /process (function_calling)
    API->>LLM: è³ªå•+åˆ©ç”¨å¯èƒ½ãƒ„ãƒ¼ãƒ«æƒ…å ±
    LLM->>API: ãƒ„ãƒ¼ãƒ«ä½¿ç”¨åˆ¤æ–­
    API->>Tools: æŒ‡å®šãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
    Tools->>KB: ãƒ‡ãƒ¼ã‚¿æ¤œç´¢
    KB->>Tools: æ¤œç´¢çµæœ
    Tools->>API: ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œçµæœ
    API->>LLM: ãƒ„ãƒ¼ãƒ«çµæœ+è³ªå•
    LLM->>API: å›ç­”ç”Ÿæˆ
    API->>UI: çµæœè¿”å´
    UI->>User: å›ç­”è¡¨ç¤º
    
    Note over LLM,Tools: LLMãŒè‡ªå¾‹çš„ã«<br/>ãƒ„ãƒ¼ãƒ«é¸æŠãƒ»å®Ÿè¡Œ
```

### æ‰‹æ³•5ã‚·ãƒ¼ã‚±ãƒ³ã‚¹: RAG + Function Calling

```mermaid
sequenceDiagram
    participant User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant UI as WebUI
    participant API as FastAPI
    participant Agent as Agent Executor
    participant VectorDB as Vector Store
    participant Tools as Function Tools
    participant LLM as Gemini LLM
    participant KB as Knowledge Base
    participant Embed as Embeddings
    
    User->>UI: è³ªå•å…¥åŠ›
    UI->>API: POST /process (rag_function_calling)
    API->>Agent: è³ªå•+åˆ©ç”¨å¯èƒ½ãƒ„ãƒ¼ãƒ«
    Agent->>LLM: æˆ¦ç•¥ç«‹æ¡ˆ
    
    alt RAGæ¤œç´¢ãŒå¿…è¦ãªå ´åˆ
        LLM->>Agent: RAGæ¤œç´¢æŒ‡ç¤º
        Agent->>Tools: RAGãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
        Tools->>Embed: è³ªå•ã‚’ãƒ™ã‚¯ãƒˆãƒ«åŒ–
        Embed->>Tools: è³ªå•ãƒ™ã‚¯ãƒˆãƒ«
        Tools->>VectorDB: ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢
        VectorDB->>Tools: é–¢é€£æ–‡æ›¸
        Tools->>Agent: RAGæ¤œç´¢çµæœ
    end
    
    alt ç›´æ¥æ¤œç´¢ãŒå¿…è¦ãªå ´åˆ
        LLM->>Agent: ç›´æ¥æ¤œç´¢æŒ‡ç¤º
        Agent->>Tools: æ¤œç´¢ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
        Tools->>KB: ãƒ‡ãƒ¼ã‚¿æ¤œç´¢
        KB->>Tools: æ¤œç´¢çµæœ
        Tools->>Agent: ç›´æ¥æ¤œç´¢çµæœ
    end
    
    Agent->>LLM: æ¤œç´¢çµæœ+è³ªå•
    LLM->>Agent: æœ€çµ‚å›ç­”
    Agent->>API: çµæœ
    API->>UI: çµæœè¿”å´
    UI->>User: å›ç­”è¡¨ç¤º
    
    Note over Agent: è¤‡æ•°ãƒ„ãƒ¼ãƒ«ã‚’<br/>çµ„ã¿åˆã‚ã›æ´»ç”¨<br/>çŠ¶æ³ã«å¿œã˜ã¦é¸æŠ
```

## ğŸ” æ‰‹æ³•æ¯”è¼ƒè¡¨

| è¦ç´  | æ‰‹æ³•1 LLMå˜ä½“ | æ‰‹æ³•2 ã‚¹ã‚¿ãƒƒãƒ•ã‚£ãƒ³ã‚° | æ‰‹æ³•3 RAG | æ‰‹æ³•4 Function Calling | æ‰‹æ³•5 RAG+FC |
|------|:---:|:---:|:---:|:---:|:---:|
| **LLM** | âœ… | âœ… | âœ… | âœ… | âœ… |
| **Knowledge Base** | âŒ | âœ… | âœ… | âœ… | âœ… |
| **Vector Store** | âŒ | âŒ | âœ… | âŒ | âœ… |
| **Embeddings** | âŒ | âŒ | âœ… | âŒ | âœ… |
| **Function Tools** | âŒ | âŒ | âŒ | âœ… | âœ… |
| **Agent Executor** | âŒ | âŒ | âŒ | âŒ | âœ… |
| **è‡ªå¾‹åˆ¤æ–­** | âŒ | âŒ | âŒ | âœ… | âœ… |
| **åŠ¹ç‡æ€§** | â­â­â­ | â­ | â­â­â­ | â­â­ | â­â­ |
| **ç²¾åº¦** | â­ | â­â­â­ | â­â­â­ | â­â­ | â­â­â­ |
| **æŸ”è»Ÿæ€§** | â­ | â­ | â­â­ | â­â­â­ | â­â­â­ |

### ğŸ“ è©•ä¾¡æŒ‡æ¨™ã®èª¬æ˜

#### ğŸ¤– è‡ªå¾‹åˆ¤æ–­
**å®šç¾©**: LLMãŒçŠ¶æ³ã«å¿œã˜ã¦é©åˆ‡ãªãƒ„ãƒ¼ãƒ«ã‚„æ¤œç´¢æ‰‹æ³•ã‚’è‡ªå‹•é¸æŠã™ã‚‹èƒ½åŠ›

- **âŒ ãªã—**: äº‹å‰ã«æ±ºã‚ã‚‰ã‚ŒãŸå‡¦ç†ã®ã¿å®Ÿè¡Œ
- **âœ… ã‚ã‚Š**: LLMãŒå‹•çš„ã«ãƒ„ãƒ¼ãƒ«é¸æŠãƒ»å®Ÿè¡Œæˆ¦ç•¥ã‚’æ±ºå®š

**èª­ã¿æ‰‹ã®åˆ¤æ–­åŸºæº–**: 
- **è‡ªå¾‹åˆ¤æ–­ãŒé‡è¦ãªå ´åˆ**: å¤šæ§˜ãªè³ªå•ã«å¯¾å¿œã€äºˆæœŸã—ãªã„æƒ…å ±ãƒ‹ãƒ¼ã‚ºã¸ã®å¯¾å¿œ
- **è‡ªå¾‹åˆ¤æ–­ãŒä¸è¦ãªå ´åˆ**: æ±ºã¾ã£ãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã®è³ªå•ã€äºˆæ¸¬å¯èƒ½ãªå‡¦ç†ãƒ•ãƒ­ãƒ¼

#### âš¡ åŠ¹ç‡æ€§ï¼ˆå‡¦ç†é€Ÿåº¦ãƒ»ãƒªã‚½ãƒ¼ã‚¹æ¶ˆè²»ï¼‰
**å®šç¾©**: ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã¨ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»é‡ã®ãƒãƒ©ãƒ³ã‚¹

- **â­â­â­ é«˜**: é«˜é€Ÿãƒ¬ã‚¹ãƒãƒ³ã‚¹ã€å°‘ãªã„ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»
- **â­â­ ä¸­**: ä¸­ç¨‹åº¦ã®å‡¦ç†æ™‚é–“ã€é©åº¦ãªãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨
- **â­ ä½**: å‡¦ç†æ™‚é–“ãŒé•·ã„ã€å¤§é‡ã®ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»

**èª­ã¿æ‰‹ã®åˆ¤æ–­åŸºæº–**:
- **é«˜åŠ¹ç‡ãŒé‡è¦**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¿œç­”ã€å¤§é‡å‡¦ç†ã€ã‚³ã‚¹ãƒˆé‡è¦–
- **åŠ¹ç‡æ€§ã‚ˆã‚Šç²¾åº¦**: è¤‡é›‘ãªåˆ†æã€é«˜å“è³ªãªå›ç­”ãŒå¿…è¦

#### ğŸ¯ ç²¾åº¦ï¼ˆå›ç­”ã®æ­£ç¢ºæ€§ãƒ»é–¢é€£æ€§ï¼‰
**å®šç¾©**: è³ªå•ã«å¯¾ã™ã‚‹å›ç­”ã®æ­£ç¢ºæ€§ã¨æƒ…å ±ã®é–¢é€£æ€§

- **â­â­â­ é«˜**: å¤–éƒ¨æƒ…å ±ã‚’æ´»ç”¨ã—ãŸæ­£ç¢ºã§è©³ç´°ãªå›ç­”
- **â­â­ ä¸­**: é–¢é€£æƒ…å ±ã¯å–å¾—ã§ãã‚‹ãŒã€æƒ…å ±é¸æŠã«èª²é¡Œ
- **â­ ä½**: é™å®šçš„ãªçŸ¥è­˜ã«ã‚ˆã‚‹æ›–æ˜§ã¾ãŸã¯ä¸æ­£ç¢ºãªå›ç­”

**èª­ã¿æ‰‹ã®åˆ¤æ–­åŸºæº–**:
- **é«˜ç²¾åº¦ãŒå¿…è¦**: å°‚é–€çš„ãªè³ªå•ã€äº‹å®Ÿç¢ºèªã€æ­£ç¢ºæ€§ãŒé‡è¦ãªæ¥­å‹™
- **ç²¾åº¦ã‚ˆã‚Šé€Ÿåº¦**: æ¦‚è¦æŠŠæ¡ã€ãƒ–ãƒ¬ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒŸãƒ³ã‚°ã€ä¸€èˆ¬çš„ãªè³ªå•

#### ğŸ”§ æŸ”è»Ÿæ€§ï¼ˆé©å¿œæ€§ãƒ»æ‹¡å¼µæ€§ï¼‰
**å®šç¾©**: å¤šæ§˜ãªè³ªå•ã‚„æ–°ã—ã„è¦æ±‚ã«å¯¾ã™ã‚‹å¯¾å¿œèƒ½åŠ›

- **â­â­â­ é«˜**: è¤‡æ•°ã®æ¤œç´¢æ‰‹æ³•ã€å‹•çš„ãªæˆ¦ç•¥å¤‰æ›´ã€å¤šæ§˜ãªæƒ…å ±æºã«å¯¾å¿œ
- **â­â­ ä¸­**: é™å®šçš„ã ãŒè¤‡æ•°ã®æƒ…å ±å–å¾—æ‰‹æ³•ã‚’åˆ©ç”¨
- **â­ ä½**: å›ºå®šçš„ãªå‡¦ç†ã€å˜ä¸€ã®æƒ…å ±æºã«ä¾å­˜

**èª­ã¿æ‰‹ã®åˆ¤æ–­åŸºæº–**:
- **é«˜æŸ”è»Ÿæ€§ãŒé‡è¦**: å¤šæ§˜ãªæ¥­å‹™ã€äºˆæœŸã—ãªã„è³ªå•ã€å°†æ¥ã®æ‹¡å¼µæ€§
- **æŸ”è»Ÿæ€§ã‚ˆã‚Šå®‰å®šæ€§**: å®šå‹çš„ãªæ¥­å‹™ã€äºˆæ¸¬å¯èƒ½ãªè³ªå•ãƒ‘ã‚¿ãƒ¼ãƒ³

### ğŸ’¡ æ‰‹æ³•é¸æŠã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

| ç”¨é€”ãƒ»è¦ä»¶ | æ¨å¥¨æ‰‹æ³• | ç†ç”± |
|------------|----------|------|
| **ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ãƒ»æ¤œè¨¼** | æ‰‹æ³•1 LLMå˜ä½“ | æœ€é€Ÿå®Ÿè£…ã€åŸºæœ¬æ€§èƒ½ç¢ºèª |
| **å°è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ãƒ»ç¢ºå®Ÿæ€§é‡è¦–** | æ‰‹æ³•2 ã‚¹ã‚¿ãƒƒãƒ•ã‚£ãƒ³ã‚° | ã‚·ãƒ³ãƒ—ãƒ«ã€ç¢ºå®Ÿã€ç†è§£ã—ã‚„ã™ã„ |
| **å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ãƒ»åŠ¹ç‡é‡è¦–** | æ‰‹æ³•3 RAG | é«˜åŠ¹ç‡ã€æ‹¡å¼µæ€§ã€ç¾ä»£çš„æ‰‹æ³• |
| **å‹•çš„ãƒ»å¤šæ§˜ãªè¦æ±‚** | æ‰‹æ³•4 Function Calling | æŸ”è»Ÿæ€§ã€è‡ªå¾‹æ€§ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ€§ |
| **æœ¬æ ¼é‹ç”¨ãƒ»æœ€é«˜å“è³ª** | æ‰‹æ³•5 RAG+FC | ç·åˆåŠ›ã€å®Ÿç”¨æ€§ã€å°†æ¥æ€§ |

## ğŸ”§ æŠ€è¡“è©³ç´°

### ä½¿ç”¨æŠ€è¡“

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: FastAPI
- **LLM**: Google Vertex AI (gemini-2.5-flash)
- **RAGãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: LangChain
- **ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢**: FAISS
- **åŸ‹ã‚è¾¼ã¿ãƒ¢ãƒ‡ãƒ«**: sentence-transformers/all-MiniLM-L6-v2
- **ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**: LangChain AgentExecutor
- **ãƒ­ã‚°**: structlog

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Next.js 15 (React 19)
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: Tailwind CSS
- **HTTPé€šä¿¡**: Axios
- **UI**: Lucide React Icons
- **é€šçŸ¥**: React Hot Toast
- **è¨€èª**: TypeScript

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```bash
rag-sample-codes/
â”œâ”€â”€ .gitignore                       # Gité™¤å¤–è¨­å®š
â”œâ”€â”€ LICENSE                          # MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹
â”œâ”€â”€ README.md                        # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ data/
â”‚   â””â”€â”€ knowledge.txt               # è£½å“å–æ‰±èª¬æ˜æ›¸ï¼ˆå…±é€šãƒ‡ãƒ¼ã‚¿ï¼‰
â”œâ”€â”€ logs/                           # å®Ÿè¡Œãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜å…ˆ
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ backend/                    # Python FastAPI ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â”‚   â”œâ”€â”€ main.py                # FastAPI ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æœ¬ä½“
â”‚   â”‚   â”œâ”€â”€ rag_engines.py         # 5ã¤ã®RAGã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè£…
â”‚   â”‚   â”œâ”€â”€ logger_config.py       # ãƒ­ã‚°è¨­å®š
â”‚   â”‚   â”œâ”€â”€ requirements.txt       # Pythonä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ run_llm_only.py       # æ—¢å­˜å®Ÿè£…1: LLMå˜ä½“åˆ©ç”¨
â”‚   â”‚   â”œâ”€â”€ run_prompt_stuffing.py # æ—¢å­˜å®Ÿè£…2: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¹ã‚¿ãƒƒãƒ•ã‚£ãƒ³ã‚°
â”‚   â”‚   â”œâ”€â”€ run_rag_only.py        # æ—¢å­˜å®Ÿè£…3: RAGã®ã¿
â”‚   â”‚   â”œâ”€â”€ run_function_calling_only.py # æ—¢å­˜å®Ÿè£…4: Function Calling
â”‚   â”‚   â””â”€â”€ run_rag_plus_fancall.py # æ—¢å­˜å®Ÿè£…5: RAG + Function Calling
â”‚   â””â”€â”€ frontend/                   # Next.js ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚       â”œâ”€â”€ src/app/page.tsx       # ãƒ¡ã‚¤ãƒ³UI
â”‚       â”œâ”€â”€ package.json           # Node.jsä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”‚       â””â”€â”€ ... (ãã®ä»–Next.jsãƒ•ã‚¡ã‚¤ãƒ«)
â””â”€â”€ .venv/                          # Pythonä»®æƒ³ç’°å¢ƒ
```

### Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½

- **ç›´æ„Ÿçš„ãªUI**: ãƒ¢ãƒ€ãƒ³ãªãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–Webã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- **ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿**: 5ã¤ã®æƒ…å ±æä¾›æ‰‹æ³•ã‚’ç°¡å˜ã«åˆ‡ã‚Šæ›¿ãˆå¯èƒ½
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å®Ÿè¡Œã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: å‡¦ç†ã®é€²è¡ŒçŠ¶æ³ã¨ä¸­é–“ç”Ÿæˆç‰©ã‚’è¡¨ç¤º
- **ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰**: ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®é…å»¶è¡¨ç¤ºæ©Ÿèƒ½
- **ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡è¡¨ç¤º**: å…¥åŠ›ãƒ»å‡ºåŠ›ãƒ»ç·ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®è©³ç´°è¡¨ç¤º
- **ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ç·¨é›†**: ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§knowledge.txtã‚’ç›´æ¥ç·¨é›†å¯èƒ½
- **å®Ÿè¡Œãƒ­ã‚°**: JSONLå½¢å¼ã§ã®è©³ç´°ãƒ­ã‚°è‡ªå‹•ç”Ÿæˆãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½

### å„æ‰‹æ³•ã®å®Ÿè£…è©³ç´°

#### 1. LLMå˜ä½“åˆ©ç”¨

- **ç›®çš„**: å¤–éƒ¨æƒ…å ±ã‚’ä¸€åˆ‡ä¸ãˆãªã‹ã£ãŸå ´åˆã®ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ç¢ºèª
- **ç‰¹å¾´**: ç´”ç²‹ãªLLMã®çŸ¥è­˜ã®ã¿ã§å›ç­”
- **ãƒ¢ãƒ‡ãƒ«**: gemini-2.5-flash

#### 2. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¹ã‚¿ãƒƒãƒ•ã‚£ãƒ³ã‚°

- **ç›®çš„**: LLMã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’æ´»ç”¨ã—ãŸå…¨æƒ…å ±åŸ‹ã‚è¾¼ã¿
- **ç‰¹å¾´**: knowledge.txtã®å…¨å†…å®¹ã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å«ã‚ã‚‹
- **åˆ©ç‚¹**: ã‚·ãƒ³ãƒ—ãƒ«ã§ç¢ºå®Ÿ
- **æ¬ ç‚¹**: ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»é‡ãŒå¤šã„

#### 3. RAGã®ã¿

- **ç›®çš„**: ç¾ä»£çš„ãªRAGã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®åŸºæœ¬å½¢
- **ç‰¹å¾´**:
  - ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã«ã‚ˆã‚‹é–¢é€£æƒ…å ±ã®å–å¾—
  - FAISS + HuggingFace Embeddings
  - LCELãƒã‚§ãƒ¼ãƒ³ã«ã‚ˆã‚‹å‡¦ç†
- **åˆ©ç‚¹**: åŠ¹ç‡çš„ã§æ‹¡å¼µæ€§ãŒé«˜ã„

#### 4. Function Callingã®ã¿

- **ç›®çš„**: LLMã®è‡ªå¾‹çš„ãƒ„ãƒ¼ãƒ«åˆ©ç”¨èƒ½åŠ›ã®æ¤œè¨¼
- **ç‰¹å¾´**:
  - `@tool`ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ã«ã‚ˆã‚‹ãƒ„ãƒ¼ãƒ«å®šç¾©
  - LLMã®è‡ªå¾‹çš„ãªãƒ„ãƒ¼ãƒ«é¸æŠ
- **åˆ©ç‚¹**: æŸ”è»Ÿã§å‹•çš„ãªæƒ…å ±å–å¾—

#### 5. RAG + Function Calling â­æ¨å¥¨â­

- **ç›®çš„**: RAGæ¤œç´¢ã¨ãƒ„ãƒ¼ãƒ«åˆ©ç”¨ã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã‚‹æœ€é«˜åº¦ãªæ§‹æˆ
- **ç‰¹å¾´**:
  - AgentExecutorã«ã‚ˆã‚‹è¤‡æ•°ãƒ„ãƒ¼ãƒ«ã®ç®¡ç†
  - RAGã‚’ãƒ„ãƒ¼ãƒ«åŒ–ã—ãŸé«˜åº¦ãªæ¤œç´¢
  - verbose=Trueã§æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ãŒè¦‹ãˆã‚‹
- **åˆ©ç‚¹**: æœ€ã‚‚æŸ”è»Ÿã§å®Ÿç”¨çš„

## ğŸ“š ç”¨èªé›†ï¼ˆRAGãƒ»LLMé–¢é€£ï¼‰

### åŸºæœ¬æ¦‚å¿µ

**RAGï¼ˆRetrieval-Augmented Generationï¼‰**
æ¤œç´¢æ‹¡å¼µç”Ÿæˆã€‚å¤–éƒ¨çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã‹ã‚‰é–¢é€£æƒ…å ±ã‚’æ¤œç´¢ã—ã€ãã®æƒ…å ±ã‚’å…ƒã«LLMãŒå›ç­”ã‚’ç”Ÿæˆã™ã‚‹æ‰‹æ³•ã€‚LLMã®çŸ¥è­˜ã®åˆ¶ç´„ã‚’è£œã„ã€æœ€æ–°æƒ…å ±ã‚„ç‰¹å®šãƒ‰ãƒ¡ã‚¤ãƒ³ã®æƒ…å ±ã‚’æ´»ç”¨ã§ãã‚‹ã€‚

**LLMï¼ˆLarge Language Modelï¼‰**
å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ã€‚GPTã€Geminiã€Claudeç­‰ã®æ±ç”¨çš„ãªè¨€èªç†è§£ãƒ»ç”Ÿæˆèƒ½åŠ›ã‚’æŒã¤AIãƒ¢ãƒ‡ãƒ«ã€‚

**Vector Storeï¼ˆãƒ™ã‚¯ãƒˆãƒ«ã‚¹ãƒˆã‚¢ï¼‰**
æ–‡æ›¸ã‚’ãƒ™ã‚¯ãƒˆãƒ«å½¢å¼ã§ä¿å­˜ã—ã€é«˜é€Ÿãªé¡ä¼¼æ¤œç´¢ã‚’å¯èƒ½ã«ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€‚Chromaã€Pineconeã€Weaviateç­‰ãŒã‚ã‚‹ã€‚

**Embeddingï¼ˆåŸ‹ã‚è¾¼ã¿ï¼‰**
ãƒ†ã‚­ã‚¹ãƒˆã‚’æ•°å€¤ãƒ™ã‚¯ãƒˆãƒ«ã«å¤‰æ›ã™ã‚‹å‡¦ç†ã€‚é¡ä¼¼ã—ãŸæ„å‘³ã®æ–‡æ›¸ã¯è¿‘ã„ãƒ™ã‚¯ãƒˆãƒ«å€¤ã‚’æŒã¤ãŸã‚ã€æ„å‘³æ¤œç´¢ãŒå¯èƒ½ã«ãªã‚‹ã€‚

### æ¤œç´¢ãƒ»å–å¾—é–¢é€£

**Similarity Searchï¼ˆé¡ä¼¼æ¤œç´¢ï¼‰**
ã‚¯ã‚¨ãƒªã¨æœ€ã‚‚é¡ä¼¼ã—ãŸãƒ™ã‚¯ãƒˆãƒ«ã‚’æŒã¤æ–‡æ›¸ã‚’æ¤œç´¢ã™ã‚‹æ‰‹æ³•ã€‚ã‚³ã‚µã‚¤ãƒ³é¡ä¼¼åº¦ã‚„ãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰è·é›¢ç­‰ã§è¨ˆç®—ã•ã‚Œã‚‹ã€‚

**Hybrid Searchï¼ˆãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢ï¼‰**
ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ï¼ˆæ„å‘³çš„é¡ä¼¼æ€§ï¼‰ã¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ï¼ˆèªå½™çš„ä¸€è‡´ï¼‰ã‚’çµ„ã¿åˆã‚ã›ãŸæ¤œç´¢æ‰‹æ³•ã€‚ã‚ˆã‚Šç²¾åº¦ã®é«˜ã„æ¤œç´¢çµæœã‚’å¾—ã‚‰ã‚Œã‚‹ã€‚

**Retrievalï¼ˆæ¤œç´¢ãƒ»å–å¾—ï¼‰**
ã‚¯ã‚¨ãƒªã«é–¢é€£ã™ã‚‹æ–‡æ›¸ã‚„ãƒãƒ£ãƒ³ã‚¯ã‚’çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å–å¾—ã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã€‚RAGã®ã€ŒRã€ã«ç›¸å½“ã™ã‚‹ã€‚

**Top-K Retrieval**
é¡ä¼¼åº¦ãŒé«˜ã„ä¸Šä½Kä»¶ã®æ–‡æ›¸ã‚’å–å¾—ã™ã‚‹æ‰‹æ³•ã€‚Kã®å€¤ã«ã‚ˆã‚Šæ¤œç´¢ç¯„å›²ã¨ç²¾åº¦ã®ãƒãƒ©ãƒ³ã‚¹ã‚’èª¿æ•´ã™ã‚‹ã€‚

### æ–‡æ›¸å‡¦ç†é–¢é€£

**Chunkingï¼ˆãƒãƒ£ãƒ³ã‚¯åˆ†å‰²ï¼‰**
é•·ã„æ–‡æ›¸ã‚’å°ã•ãªå˜ä½ï¼ˆãƒãƒ£ãƒ³ã‚¯ï¼‰ã«åˆ†å‰²ã™ã‚‹å‡¦ç†ã€‚LLMã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåˆ¶é™ã«å¯¾å¿œã—ã€æ¤œç´¢ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã‚‹ã€‚

**Chunk Sizeï¼ˆãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚ºï¼‰**
å„ãƒãƒ£ãƒ³ã‚¯ã«å«ã‚ã‚‹æ–‡å­—æ•°ã‚„ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã€‚å°ã•ã™ãã‚‹ã¨æ–‡è„ˆãŒå¤±ã‚ã‚Œã€å¤§ãã™ãã‚‹ã¨æ¤œç´¢ç²¾åº¦ãŒä½ä¸‹ã™ã‚‹ã€‚

**Chunk Overlapï¼ˆãƒãƒ£ãƒ³ã‚¯ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—ï¼‰**
éš£æ¥ã™ã‚‹ãƒãƒ£ãƒ³ã‚¯é–“ã§é‡è¤‡ã•ã›ã‚‹æ–‡å­—æ•°ã€‚æ–‡è„ˆã®åˆ‡æ–­ã‚’é˜²ãã€æ¤œç´¢ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã‚‹ã€‚

**Document Splittingï¼ˆæ–‡æ›¸åˆ†å‰²ï¼‰**
æ–‡æ›¸ã‚’ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã€æ®µè½ã€æ–‡ãªã©ã®æ„å‘³çš„å˜ä½ã§åˆ†å‰²ã™ã‚‹å‡¦ç†ã€‚å˜ç´”ãªæ–‡å­—æ•°åˆ†å‰²ã‚ˆã‚Šç²¾åº¦ãŒé«˜ã„ã€‚

### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ»ç”Ÿæˆé–¢é€£

**Prompt Templateï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰**
LLMã¸ã®æŒ‡ç¤ºã‚’å®šå‹åŒ–ã—ãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€‚ä¸€è²«æ€§ã®ã‚ã‚‹å‡ºåŠ›ã‚’å¾—ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã€‚

**Prompt Stuffingï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè©°ã‚è¾¼ã¿ï¼‰**
é–¢é€£æ–‡æ›¸ã‚’ã™ã¹ã¦ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å«ã‚ã¦LLMã«é€ä¿¡ã™ã‚‹æ‰‹æ³•ã€‚ã‚·ãƒ³ãƒ—ãƒ«ã ãŒãƒˆãƒ¼ã‚¯ãƒ³åˆ¶é™ã«æ³¨æ„ãŒå¿…è¦ã€‚

**Context Windowï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼‰**
LLMãŒä¸€åº¦ã«å‡¦ç†ã§ãã‚‹ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ€å¤§æ•°ã€‚ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã£ã¦ç•°ãªã‚Šã€é•·ã„æ–‡æ›¸ã®å‡¦ç†èƒ½åŠ›ã«å½±éŸ¿ã™ã‚‹ã€‚

**Tokenï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ï¼‰**
LLMãŒå‡¦ç†ã™ã‚‹æœ€å°å˜ä½ã€‚é€šå¸¸ã€å˜èªã®ä¸€éƒ¨ã‹ã‚‰æ•°å˜èªç¨‹åº¦ã€‚æ—¥æœ¬èªã§ã¯1æ–‡å­—ã‚ãŸã‚Š2-3ãƒˆãƒ¼ã‚¯ãƒ³ç¨‹åº¦ã€‚

### æ©Ÿèƒ½ãƒ»ãƒ¢ãƒ¼ãƒ‰é–¢é€£

**Function Callingï¼ˆé–¢æ•°å‘¼ã³å‡ºã—ï¼‰**
LLMãŒå¤–éƒ¨ã®é–¢æ•°ã‚„APIã‚’å‘¼ã³å‡ºã—ã¦å‹•çš„ã«æƒ…å ±ã‚’å–å¾—ãƒ»å‡¦ç†ã™ã‚‹æ©Ÿèƒ½ã€‚

**Groundingï¼ˆã‚°ãƒ©ã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼‰**
LLMã®å›ç­”ã‚’å¤–éƒ¨ã®äº‹å®Ÿã«åŸºã¥ã‹ã›ã‚‹ã“ã¨ã€‚RAGã¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã®ä¸€ç¨®ã€‚

**Hallucinationï¼ˆå¹»è¦šï¼‰**
LLMãŒäº‹å®Ÿã«åŸºã¥ã‹ãªã„å†…å®¹ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã€‚RAGã«ã‚ˆã‚Šè»½æ¸›ã§ãã‚‹ã€‚

### è©•ä¾¡ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é–¢é€£

**Relevanceï¼ˆé–¢é€£æ€§ï¼‰**
æ¤œç´¢çµæœãŒã‚¯ã‚¨ãƒªã«ã©ã®ç¨‹åº¦é–¢é€£ã—ã¦ã„ã‚‹ã‹ã®æŒ‡æ¨™ã€‚RAGã‚·ã‚¹ãƒ†ãƒ ã®é‡è¦ãªè©•ä¾¡è»¸ã€‚

**Precisionï¼ˆç²¾å¯†åº¦ï¼‰**
æ¤œç´¢çµæœã®ã†ã¡å®Ÿéš›ã«é–¢é€£æ€§ã®é«˜ã„æ–‡æ›¸ã®å‰²åˆã€‚

**Recallï¼ˆå†ç¾ç‡ï¼‰**
é–¢é€£ã™ã‚‹å…¨æ–‡æ›¸ã®ã†ã¡å®Ÿéš›ã«æ¤œç´¢ã§å–å¾—ã§ããŸæ–‡æ›¸ã®å‰²åˆã€‚

**Latencyï¼ˆãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ï¼‰**
ã‚¯ã‚¨ãƒªã‹ã‚‰å›ç­”ã¾ã§ã®å¿œç­”æ™‚é–“ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã«ç›´çµã™ã‚‹é‡è¦ãªæŒ‡æ¨™ã€‚

### æŠ€è¡“å®Ÿè£…é–¢é€£

**Vector Databaseï¼ˆãƒ™ã‚¯ãƒˆãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼‰**
é«˜æ¬¡å…ƒãƒ™ã‚¯ãƒˆãƒ«ã®ä¿å­˜ãƒ»æ¤œç´¢ã«ç‰¹åŒ–ã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€‚ANNï¼ˆè¿‘ä¼¼æœ€è¿‘å‚ï¼‰æ¤œç´¢ã‚’é«˜é€Ÿå®Ÿè¡Œã™ã‚‹ã€‚

**Semantic Searchï¼ˆæ„å‘³æ¤œç´¢ï¼‰**
å˜èªã®è¡¨é¢çš„ãªä¸€è‡´ã§ã¯ãªãã€æ„å‘³çš„ãªé¡ä¼¼æ€§ã«åŸºã¥ãæ¤œç´¢ã€‚åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã‚’åˆ©ç”¨ã™ã‚‹ã€‚

**Rerankingï¼ˆå†ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼‰**
åˆæœŸæ¤œç´¢çµæœã‚’ã‚ˆã‚Šç²¾å¯†ãªãƒ¢ãƒ‡ãƒ«ã§å†è©•ä¾¡ãƒ»ä¸¦ã³æ›¿ãˆã™ã‚‹æ‰‹æ³•ã€‚æ¤œç´¢ç²¾åº¦ã‚’ã•ã‚‰ã«å‘ä¸Šã•ã›ã‚‹ã€‚

**Metadata Filteringï¼ˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼‰**
æ—¥ä»˜ã€ã‚«ãƒ†ã‚´ãƒªã€ä½œæˆè€…ç­‰ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦æ¤œç´¢å¯¾è±¡ã‚’äº‹å‰ã«çµã‚Šè¾¼ã‚€æ‰‹æ³•ã€‚

## ğŸ“‹ äº‹å‰æº–å‚™: Google Cloud AI APIè¨­å®š

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã‚’å‹•ä½œã•ã›ã‚‹ã«ã¯ã€Google Cloud Projectã§Vertex AI APIã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®WebUIä¸­å¿ƒã®æ‰‹é †ã§ã€åˆå¿ƒè€…ã§ã‚‚å®‰å¿ƒã—ã¦è¨­å®šã§ãã¾ã™ã€‚

> **ğŸ’¡ è¨­å®šã®å…¨ä½“åƒ**  
> ã“ã®è¨­å®šã¯ã€ŒAIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®¶ã‚’å»ºã¦ã¦ã€é›»æ°—ãƒ»æ°´é“ã‚’é€šã—ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒå…¥å±…ã§ãã‚‹ã‚ˆã†ã«èº«åˆ†è¨¼æ˜æ›¸ã‚’ä½œã‚‹ã€ã¨ã„ã†ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆã¨æœ‰åŠ¹åŒ–

> **ğŸ  ç›®çš„**: ã“ã‚Œã‹ã‚‰ä½œã‚‹AIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã€Œå®¶ã€ã¨ã€Œä½æ‰€ã€ã‚’æ±ºã‚ã€é›»æ°—ã‚„æ°´é“ï¼ˆAPIï¼‰ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ä½œæ¥­ã§ã™ã€‚

#### 1-1. Google Cloudã«ãƒ­ã‚°ã‚¤ãƒ³
[Google Cloud Console](https://console.cloud.google.com/)ã«ã€ãŠæŒã¡ã®Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ã€‚

#### 1-2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹
1. ç”»é¢å·¦ä¸Šã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹éƒ¨åˆ†ï¼ˆä¾‹: `My First Project`ï¼‰ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã€Œæ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€ã‚’é¸æŠ
3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã«åˆ†ã‹ã‚Šã‚„ã™ã„åå‰ï¼ˆä¾‹: `My RAG Project`ï¼‰ã‚’å…¥åŠ›
4. ã€Œä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
5. **é‡è¦**: ä½œæˆã•ã‚ŒãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã‚’ãƒ¡ãƒ¢ã—ã¦ãã ã•ã„

> **â“ ãªãœãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå¿…è¦ï¼Ÿ**  
> ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ãƒªã‚½ãƒ¼ã‚¹ã‚„èª²é‡‘ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ç‹¬ç«‹ã—ãŸã€Œç®±ã€ã§ã™ã€‚ã“ã®ç®±ã‚’ä½œã‚‹ã“ã¨ã§ã€ä»–ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨å®Œå…¨ã«åˆ†é›¢ã—ã¦é–‹ç™ºã‚’é€²ã‚ã‚‰ã‚Œã¾ã™ã€‚

#### 1-3. è«‹æ±‚ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹
1. å·¦ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆâ˜°ï¼‰ã‹ã‚‰ã€ŒãŠæ”¯æ‰•ã„ã€ã‚’é¸æŠ
2. ç”»é¢ã®æŒ‡ç¤ºã«å¾“ã£ã¦ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æƒ…å ±ãªã©ã‚’ç™»éŒ²
3. ã€Œè«‹æ±‚å…ˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€ã‚’ä½œæˆãƒ»ãƒªãƒ³ã‚¯

> **ğŸ’° è«‹æ±‚ã«ã¤ã„ã¦**  
> APIåˆ©ç”¨ã¯å¾“é‡èª²é‡‘åˆ¶ã®ãŸã‚ã€æ”¯æ‰•ã„æƒ…å ±ã®ç™»éŒ²ãŒå¿…é ˆã§ã™ã€‚ãŸã ã—ã€å¤šãã®å ´åˆã€å€‹äººã®å­¦ç¿’ç¯„å›²ã§ã‚ã‚Œã°ç„¡æ–™åˆ©ç”¨æ å†…ã«åã¾ã‚Šã¾ã™ã€‚

#### 1-4. Vertex AI APIã‚’æœ‰åŠ¹ã«ã™ã‚‹
1. ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆâ˜°ï¼‰ã‹ã‚‰ã€ŒAPIã¨ã‚µãƒ¼ãƒ“ã‚¹ã€â†’ã€Œãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€ã‚’é¸æŠ
2. æ¤œç´¢ãƒãƒ¼ã«ã€ŒVertex AI APIã€ã¨å…¥åŠ›
3. è¡¨ç¤ºã•ã‚ŒãŸAPIã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€Œæœ‰åŠ¹ã«ã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

> **ğŸ” ãªãœæœ‰åŠ¹åŒ–ãŒå¿…è¦ï¼Ÿ**  
> ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãŸã‚ã€Google Cloudã®APIã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚ªãƒ•ã«ãªã£ã¦ã„ã¾ã™ã€‚ã€Œã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§Geminiã‚’ä½¿ã„ã¾ã™ã€ã¨ã„ã†æ„æ€è¡¨ç¤ºã¨ã—ã¦ã€æ˜ç¤ºçš„ã«ã‚ªãƒ³ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—2: èªè¨¼ã‚­ãƒ¼ï¼ˆã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ï¼‰ã®ä½œæˆ

> **ğŸ”‘ ç›®çš„**: ã‚ãªãŸã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒã€è¨±å¯ã•ã‚ŒãŸåˆ©ç”¨è€…ã§ã‚ã‚‹ã“ã¨ã‚’è¨¼æ˜ã™ã‚‹ãŸã‚ã®ã€Œèº«åˆ†è¨¼æ˜æ›¸ã€ã¨ã€Œéµã€ã‚’ä½œæˆã—ã¾ã™ã€‚

#### 2-1. ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹
1. ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆâ˜°ï¼‰ã‹ã‚‰ã€ŒIAMã¨ç®¡ç†ã€â†’ã€Œã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€ã‚’é¸æŠ
2. ã€Œ+ ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. åˆ†ã‹ã‚Šã‚„ã™ã„åå‰ï¼ˆä¾‹: `gemini-rag-runner`ï¼‰ã‚’ä»˜ã‘ã¦ã€Œä½œæˆã—ã¦ç¶šè¡Œã€

> **ğŸ¤– ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ã¯ï¼Ÿ**  
> ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ã€äººé–“ã§ã¯ãªãã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ å°‚ç”¨ã®ç‰¹åˆ¥ãªGoogleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã™ã€‚ã“ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«æ¨©é™ã‚’ä¸ãˆã‚‹ã“ã¨ã§ã€å®‰å…¨ã«APIã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

#### 2-2. å½¹å‰²ï¼ˆæ¨©é™ï¼‰ã‚’ä»˜ä¸ã™ã‚‹
1. ã€Œãƒ­ãƒ¼ãƒ«ã‚’é¸æŠã€ã§ã€ŒVertex AI ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ã‚’æ¤œç´¢ã—ã¦é¸æŠ
2. ã€Œç¶šè¡Œã€â†’ã€Œå®Œäº†ã€ã¨é€²ã‚€

> **ğŸ›¡ï¸ æœ€å°æ¨©é™ã®åŸå‰‡**  
> ä½œæˆã—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ç”¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã€ã€Œã‚ãªãŸã¯Vertex AIã‚’ä½¿ã£ã¦ã‚‚è‰¯ã„ã§ã™ã‚ˆã€ã¨ã„ã†æ¨©é™ã‚’ä¸ãˆã‚‹ã“ã¨ã§ã€å¿…è¦æœ€å°é™ã®æ¨©é™ã§å®‰å…¨ã«é‹ç”¨ã§ãã¾ã™ã€‚

#### 2-3. JSONã‚­ãƒ¼ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹
1. ä½œæˆã—ãŸã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ä¸€è¦§ã‹ã‚‰ã€ä»Šä½œã£ãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã€Œã‚­ãƒ¼ã€ã‚¿ãƒ–ã«ç§»å‹•
3. ã€Œéµã‚’è¿½åŠ ã€â†’ã€Œæ–°ã—ã„éµã‚’ä½œæˆã€ã‚’é¸æŠ
4. ã‚­ãƒ¼ã®ã‚¿ã‚¤ãƒ—ã¯ã€ŒJSONã€ã®ã¾ã¾ã€Œä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
5. è‡ªå‹•çš„ã«JSONãƒ•ã‚¡ã‚¤ãƒ«ãŒPCã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™

> **ğŸ” ç§˜å¯†éµã®é‡è¦æ€§**  
> ã“ã®JSONãƒ•ã‚¡ã‚¤ãƒ«ãŒã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒGoogleã«è‡ªåˆ†ã‚’è¨¼æ˜ã™ã‚‹ãŸã‚ã®ã€Œç§˜å¯†ã®éµã€ã§ã™ã€‚ã“ã‚Œã‚’æŒã£ã¦ã„ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã ã‘ãŒã€APIã‚’å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—3: PCç’°å¢ƒã®è¨­å®š

> **âš™ï¸ ç›®çš„**: ã‚ãªãŸã®PCä¸Šã§å‹•ããƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã€ã€Œéµã€ã®ã‚ã‚Šã‹ã‚’æ•™ãˆã¾ã™ã€‚

#### 3-1. ã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®‰å…¨ãªå ´æ‰€ã«é…ç½®

1. ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸJSONã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•
2. ãƒ•ã‚¡ã‚¤ãƒ«åã‚’åˆ†ã‹ã‚Šã‚„ã™ã„åå‰ï¼ˆä¾‹: `service-account-key.json`ï¼‰ã«å¤‰æ›´ï¼ˆä»»æ„ï¼‰

> **ğŸ“ æ¨å¥¨é…ç½®å ´æ‰€**  
> ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«é…ç½®ã™ã‚‹ã“ã¨ã§ã€ç›¸å¯¾ãƒ‘ã‚¹ã§æŒ‡å®šã§ãã€ãƒãƒ¼ãƒ é–‹ç™ºæ™‚ã®è¨­å®šãŒçµ±ä¸€ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚

#### 3-2. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®å†…å®¹ã‚’è¨˜è¼‰ï¼š

```bash
# å¿…é ˆè¨­å®š
GOOGLE_CLOUD_PROJECT=your-actual-project-id
GOOGLE_APPLICATION_CREDENTIALS=./service-account-key.json
GOOGLE_CLOUD_REGION=us-central1

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®š
CHUNK_SIZE=800
CHUNK_OVERLAP=150
MAX_RETRIEVED_DOCS=5
```

> **ğŸ”§ ç’°å¢ƒå¤‰æ•°è¨­å®šã®ä»£æ›¿æ–¹æ³•**  
> `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®ä»£ã‚ã‚Šã«ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ç›´æ¥è¨­å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ï¼š

**Windows PowerShell:**
```powershell
$env:GOOGLE_CLOUD_PROJECT = "your-project-id"
$env:GOOGLE_APPLICATION_CREDENTIALS = ".\service-account-key.json"
```

**macOS/Linux:**
```bash
export GOOGLE_CLOUD_PROJECT="your-project-id"
export GOOGLE_APPLICATION_CREDENTIALS="./service-account-key.json"
```

> **ğŸ’¡ ãªãœç’°å¢ƒå¤‰æ•°ãŒå¿…è¦ï¼Ÿ**  
> LangChainãªã©ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã€`GOOGLE_APPLICATION_CREDENTIALS`ã¨ã„ã†æ±ºã¾ã£ãŸåå‰ã®ç’°å¢ƒå¤‰æ•°ã‚’è‡ªå‹•ã§æ¢ã—ã«è¡Œãã¾ã™ã€‚ã“ã“ã«ãƒ‘ã‚¹ã‚’è¨­å®šã—ã¦ãŠã‘ã°ã€ã‚³ãƒ¼ãƒ‰å†…ã«ç§˜å¯†ã®éµæƒ…å ±ã‚’æ›¸ã‹ãšã«æ¸ˆã¿ã€å®‰å…¨ã§ã™ã€‚

#### 3-3. è¨­å®šç¢ºèª

ä»¥ä¸‹ã®Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã§è¨­å®šãŒæ­£ã—ã„ã‹ãƒ†ã‚¹ãƒˆã§ãã¾ã™ï¼š

```python
import os
from google.cloud import aiplatform

# ç’°å¢ƒå¤‰æ•°ã®ç¢ºèª
project_id = os.getenv('GOOGLE_CLOUD_PROJECT')
credentials_path = os.getenv('GOOGLE_APPLICATION_CREDENTIALS')

print(f"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID: {project_id}")
print(f"èªè¨¼ãƒ•ã‚¡ã‚¤ãƒ«: {credentials_path}")

# Vertex AIæ¥ç¶šãƒ†ã‚¹ãƒˆ
try:
    aiplatform.init(project=project_id, location="us-central1")
    print("âœ… Vertex AIæ¥ç¶šæˆåŠŸï¼")
except Exception as e:
    print(f"âŒ æ¥ç¶šã‚¨ãƒ©ãƒ¼: {e}")
```

### ğŸ¯ è¨­å®šå®Œäº†å¾Œã®æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

Google Cloud AI APIã®è¨­å®šãŒå®Œäº†ã—ãŸã‚‰ã€ä»¥ä¸‹ã®æ‰‹é †ã§ã‚·ã‚¹ãƒ†ãƒ ã‚’èµ·å‹•ã§ãã¾ã™ï¼š

1. **ï¿½ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«æˆ»ã£ã¦å®Ÿè¡Œã™ã‚‹
2. ã¾ãŸã¯ **ï¿½ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»å®Ÿè¡Œæ‰‹é †** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§è©³ç´°ãªæ‰‹é †ã‚’ç¢ºèªã™ã‚‹
3. å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã¯ **ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°** ã‚’å‚ç…§

> **ğŸ‰ ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼**  
> ã“ã‚Œã§ã€LLMã‚’æ´»ç”¨ã—ãŸRAGã‚·ã‚¹ãƒ†ãƒ ã‚’ä½“é¨“ã™ã‚‹æº–å‚™ãŒæ•´ã„ã¾ã—ãŸã€‚**[ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ](#ğŸš€-ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ)** ã«æˆ»ã£ã¦ã€å®Ÿéš›ã«ã‚·ã‚¹ãƒ†ãƒ ã‚’èµ·å‹•ã—ã¦ã€5ã¤ã®ç•°ãªã‚‹æƒ…å ±æä¾›æ‰‹æ³•ã‚’æ¯”è¼ƒã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

---

## ğŸš€ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»å®Ÿè¡Œæ‰‹é †

### åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆåˆã‚ã¦å®Ÿè¡Œã™ã‚‹å ´åˆï¼‰

#### 1. å‰ææ¡ä»¶ã®ç¢ºèª

- Python 3.10ä»¥ä¸Š
- Node.js 18ä»¥ä¸Š
- Git

#### 2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone <repository-url>
cd rag-sample-codes
```

#### 3. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ç’°å¢ƒæ§‹ç¯‰

```bash
# Pythonä»®æƒ³ç’°å¢ƒä½œæˆãƒ»æœ‰åŠ¹åŒ–
python -m venv .venv

# Windows
.venv\Scripts\activate

# Linux/Mac
source .venv/bin/activate

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r src/backend/requirements.txt
```

#### 4. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç’°å¢ƒæ§‹ç¯‰

```bash
cd src/frontend
npm install
cd ../..
```

#### 5. ç’°å¢ƒå¤‰æ•°è¨­å®š

å‰è¿°ã®ã€Œäº‹å‰æº–å‚™ã€ã§è¨­å®šã—ãŸ`.env`ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã€‚

#### 6. åˆå›å®Ÿè¡Œãƒ†ã‚¹ãƒˆ

```bash
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«1: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•
python src/backend/main.py

# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«2: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•ï¼ˆæ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ï¼‰
cd src/frontend
npm run dev
```

#### 7. å‹•ä½œç¢ºèª

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: http://localhost:3000
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API**: http://localhost:8000
- **APIä»•æ§˜æ›¸**: http://localhost:8000/docs

### é€šå¸¸å®Ÿè¡Œï¼ˆ2å›ç›®ä»¥é™ï¼‰

ä¸€åº¦ç’°å¢ƒæ§‹ç¯‰ãŒå®Œäº†ã—ã¦ã„ã‚Œã°ã€ä»¥ä¸‹ã®æ‰‹é †ã§ç°¡å˜ã«èµ·å‹•ã§ãã¾ã™ï¼š

#### æ–¹æ³•1: æ‰‹å‹•èµ·å‹•

```bash
# 1. Pythonä»®æƒ³ç’°å¢ƒã‚’æœ‰åŠ¹åŒ–
.venv\Scripts\activate  # Windows
# source .venv/bin/activate  # Linux/Mac

# 2. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•ï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«1ï¼‰
python src/backend/main.py

# 3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•ï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«2ï¼‰
cd src/frontend
npm run dev
```

#### æ–¹æ³•2: ä¸€æ‹¬èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆæ¨å¥¨ï¼‰

**Windowsç”¨ `start.bat`:**
```batch
@echo off
echo RAG Sample System Starting...

:: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•
start "Backend" cmd /k ".venv\Scripts\activate && python src/backend/main.py"

:: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•
start "Frontend" cmd /k "cd src/frontend && npm run dev"

echo ã‚·ã‚¹ãƒ†ãƒ ã‚’èµ·å‹•ã—ã¦ã„ã¾ã™...
echo ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: http://localhost:8000
echo ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: http://localhost:3000
pause
```

**Linux/Macç”¨ `start.sh`:**
```bash
#!/bin/bash
echo "RAG Sample System Starting..."

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•
source .venv/bin/activate
python src/backend/main.py &

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•
cd src/frontend
npm run dev &

echo "ã‚·ã‚¹ãƒ†ãƒ ã‚’èµ·å‹•ã—ã¦ã„ã¾ã™..."
echo "ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: http://localhost:8000"
echo "ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: http://localhost:3000"
```

## ğŸ“Š ãƒ­ã‚°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

å®Ÿè¡Œãƒ­ã‚°ã¯`logs/`ãƒ•ã‚©ãƒ«ãƒ€ã«`YYYYMMDDHHMMSS_llm-rag-exp.jsonl`å½¢å¼ã§ä¿å­˜ã•ã‚Œã¾ã™ï¼š

```json
{
  "timestamp": "2025-07-02T15:30:45.123456",
  "execution_mode": "rag_function_calling",
  "query": "ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰E-404ã®å¯¾å‡¦æ³•ã¯ï¼Ÿ",
  "response": "...",
  "input_tokens": 150,
  "output_tokens": 200,
  "total_tokens": 350,
  "execution_time": 3.45,
  "intermediate_steps": [...],
  "demo_mode": false
}
```

## Google Cloud & LLM æ¥ç¶šãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

<details>
<summary>ğŸ”§ <strong>Google Cloudé–¢é€£ã®ã‚¨ãƒ©ãƒ¼ã¨è§£æ±ºæ–¹æ³•</strong>ï¼ˆã‚¯ãƒªãƒƒã‚¯ã—ã¦å±•é–‹ï¼‰</summary>

### ã‚ˆãã‚ã‚‹æ¥ç¶šã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦æ³•

#### èªè¨¼é–¢é€£ã®ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼: `google.auth.exceptions.DefaultCredentialsError`**
```
google.auth.exceptions.DefaultCredentialsError: Could not automatically determine credentials.
```

**åŸå› ã¨å¯¾å‡¦æ³•:**
- `GOOGLE_APPLICATION_CREDENTIALS`ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„
- ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ãŒé–“é•ã£ã¦ã„ã‚‹

```bash
# ç’°å¢ƒå¤‰æ•°ã‚’ç¢ºèª
echo $env:GOOGLE_APPLICATION_CREDENTIALS  # Windows PowerShell
echo $GOOGLE_APPLICATION_CREDENTIALS     # Linux/Mac

# æ­£ã—ãè¨­å®š
$env:GOOGLE_APPLICATION_CREDENTIALS="C:\path\to\service-account-key.json"
```

**ã‚¨ãƒ©ãƒ¼: `google.auth.exceptions.RefreshError`**
```
google.auth.exceptions.RefreshError: The credentials do not contain the necessary fields.
```

**åŸå› ã¨å¯¾å‡¦æ³•:**
- ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼ãŒä¸æ­£
- ã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ãŒç ´æã—ã¦ã„ã‚‹
- æ¨©é™ãŒä¸è¶³ã—ã¦ã„ã‚‹

```bash
# ã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ç¢ºèªï¼ˆJSONã¨ã—ã¦æœ‰åŠ¹ã‹ãƒã‚§ãƒƒã‚¯ï¼‰
python -c "import json; print(json.load(open('path/to/key.json'))['type'])"

# æ–°ã—ã„ã‚­ãƒ¼ã‚’ç”Ÿæˆã—ç›´ã™
gcloud iam service-accounts keys create new-key.json --iam-account=your-service-account@project.iam.gserviceaccount.com
```

#### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šé–¢é€£ã®ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼: `google.api_core.exceptions.PermissionDenied`**
```
google.api_core.exceptions.PermissionDenied: 403 Permission denied on resource project my-project.
```

**åŸå› ã¨å¯¾å‡¦æ³•:**
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDãŒé–“é•ã£ã¦ã„ã‚‹
- Vertex AI APIãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ãªã„
- ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«å¿…è¦ãªæ¨©é™ãŒãªã„

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã‚’ç¢ºèª
gcloud config get-value project

# Vertex AI APIã‚’æœ‰åŠ¹åŒ–
gcloud services enable aiplatform.googleapis.com

# å¿…è¦ãªæ¨©é™ã‚’è¿½åŠ 
gcloud projects add-iam-policy-binding PROJECT_ID \
    --member="serviceAccount:your-service-account@PROJECT_ID.iam.gserviceaccount.com" \
    --role="roles/aiplatform.user"
```

#### ãƒªãƒ¼ã‚¸ãƒ§ãƒ³é–¢é€£ã®ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼: `google.api_core.exceptions.NotFound`**
```
google.api_core.exceptions.NotFound: 404 Location us-central1-a is not found or access is denied.
```

**åŸå› ã¨å¯¾å‡¦æ³•:**
- æŒ‡å®šã—ãŸãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã§Vertex AIãŒåˆ©ç”¨ã§ããªã„
- ãƒªãƒ¼ã‚¸ãƒ§ãƒ³åãŒé–“é•ã£ã¦ã„ã‚‹

```python
# åˆ©ç”¨å¯èƒ½ãªãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèª
SUPPORTED_REGIONS = [
    "us-central1",
    "us-east1", 
    "us-west1",
    "europe-west1",
    "asia-northeast1"
]

# ç’°å¢ƒå¤‰æ•°ã§ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®š
export GOOGLE_CLOUD_REGION="us-central1"
```

#### ãƒ¢ãƒ‡ãƒ«é–¢é€£ã®ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼: `google.api_core.exceptions.InvalidArgument`**
```
google.api_core.exceptions.InvalidArgument: 400 Model gemini-pro-vision does not exist.
```

**åŸå› ã¨å¯¾å‡¦æ³•:**
- ãƒ¢ãƒ‡ãƒ«åãŒé–“é•ã£ã¦ã„ã‚‹
- æŒ‡å®šã—ãŸãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã§ãƒ¢ãƒ‡ãƒ«ãŒåˆ©ç”¨ã§ããªã„

```python
# åˆ©ç”¨å¯èƒ½ãªãƒ¢ãƒ‡ãƒ«ã‚’ç¢ºèª
AVAILABLE_MODELS = {
    "gemini-1.5-pro": "æœ€æ–°ã®é«˜æ€§èƒ½ãƒ¢ãƒ‡ãƒ«",
    "gemini-1.5-flash": "é«˜é€Ÿãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ¢ãƒ‡ãƒ«", 
    "gemini-pro": "æ±ç”¨ãƒ¢ãƒ‡ãƒ«"
}

# ãƒ¢ãƒ‡ãƒ«åã‚’ä¿®æ­£
model_name = "gemini-1.5-pro"  # æ­£ã—ã„ãƒ¢ãƒ‡ãƒ«å
```

#### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é–¢é€£ã®ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼: `requests.exceptions.ConnectionError`**
```
requests.exceptions.ConnectionError: HTTPSConnectionPool(host='aiplatform.googleapis.com', port=443)
```

**åŸå› ã¨å¯¾å‡¦æ³•:**
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã®å•é¡Œ
- ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã®å•é¡Œ
- ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã«ã‚ˆã‚‹ãƒ–ãƒ­ãƒƒã‚¯

```bash
# æ¥ç¶šç¢ºèª
curl -I https://aiplatform.googleapis.com

# ãƒ—ãƒ­ã‚­ã‚·è¨­å®šï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
export HTTPS_PROXY=http://proxy.company.com:8080
export HTTP_PROXY=http://proxy.company.com:8080
```

#### æ–™é‡‘ãƒ»ã‚¯ã‚©ãƒ¼ã‚¿é–¢é€£ã®ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼: `google.api_core.exceptions.ResourceExhausted`**
```
google.api_core.exceptions.ResourceExhausted: 429 Quota exceeded for quota metric 'aiplatform.googleapis.com/requests' 
```

**åŸå› ã¨å¯¾å‡¦æ³•:**
- APIå‘¼ã³å‡ºã—å›æ•°ã®ä¸Šé™ã«é”ã—ãŸ
- èª²é‡‘ãŒåœæ­¢ã—ã¦ã„ã‚‹

```bash
# ã‚¯ã‚©ãƒ¼ã‚¿ä½¿ç”¨é‡ã‚’ç¢ºèª
gcloud monitoring metrics list --filter="aiplatform.googleapis.com"

# èª²é‡‘ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ç¢ºèª
gcloud billing accounts list
gcloud billing projects describe PROJECT_ID
```

### ãƒ‡ãƒãƒƒã‚°ç”¨ã®è¨­å®š

#### è©³ç´°ãƒ­ã‚°ã®æœ‰åŠ¹åŒ–

```python
import logging
import google.auth
from google.auth.transport.requests import Request

# è©³ç´°ãƒ­ã‚°ã‚’æœ‰åŠ¹åŒ–
logging.basicConfig(level=logging.DEBUG)
logger = logging.getLogger('google.auth')
logger.setLevel(logging.DEBUG)

# èªè¨¼æƒ…å ±ã®ç¢ºèª
credentials, project = google.auth.default()
credentials.refresh(Request())
print(f"Project: {project}")
print(f"Token valid: {credentials.valid}")
```

#### ç’°å¢ƒå¤‰æ•°ã®ç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```python
import os
import json
from pathlib import Path

def check_environment():
    """ç’°å¢ƒè¨­å®šã‚’ç¢ºèªã™ã‚‹ãƒ‡ãƒãƒƒã‚°é–¢æ•°"""
    
    # å¿…é ˆç’°å¢ƒå¤‰æ•°ã‚’ãƒã‚§ãƒƒã‚¯
    required_vars = [
        "GOOGLE_CLOUD_PROJECT",
        "GOOGLE_APPLICATION_CREDENTIALS"
    ]
    
    print("=== ç’°å¢ƒå¤‰æ•°ç¢ºèª ===")
    for var in required_vars:
        value = os.getenv(var)
        if value:
            print(f"âœ… {var}: {value}")
            
            # ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª
            if var == "GOOGLE_APPLICATION_CREDENTIALS":
                if Path(value).exists():
                    try:
                        with open(value) as f:
                            key_data = json.load(f)
                        print(f"   ğŸ“‹ Type: {key_data.get('type')}")
                        print(f"   ğŸ“‹ Project: {key_data.get('project_id')}")
                        print(f"   ğŸ“‹ Client Email: {key_data.get('client_email')}")
                    except Exception as e:
                        print(f"   âŒ ã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼: {e}")
                else:
                    print(f"   âŒ ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ã¾ã›ã‚“: {value}")
        else:
            print(f"âŒ {var}: æœªè¨­å®š")
    
    # Vertex AIåˆ©ç”¨å¯èƒ½æ€§ãƒã‚§ãƒƒã‚¯
    print("\n=== Vertex AIæ¥ç¶šç¢ºèª ===")
    try:
        from google.cloud import aiplatform
        aiplatform.init(project=os.getenv("GOOGLE_CLOUD_PROJECT"))
        print("âœ… Vertex AIåˆæœŸåŒ–æˆåŠŸ")
    except Exception as e:
        print(f"âŒ Vertex AIåˆæœŸåŒ–å¤±æ•—: {e}")

if __name__ == "__main__":
    check_environment()
```

#### æ®µéšçš„ãªæ¥ç¶šãƒ†ã‚¹ãƒˆ

```python
def test_connection_step_by_step():
    """æ®µéšçš„ã«æ¥ç¶šã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹é–¢æ•°"""
    
    # Step 1: åŸºæœ¬èªè¨¼
    print("Step 1: åŸºæœ¬èªè¨¼ãƒ†ã‚¹ãƒˆ")
    try:
        import google.auth
        credentials, project = google.auth.default()
        print(f"âœ… èªè¨¼æˆåŠŸ - Project: {project}")
    except Exception as e:
        print(f"âŒ èªè¨¼å¤±æ•—: {e}")
        return
    
    # Step 2: Vertex AIåˆæœŸåŒ–
    print("\nStep 2: Vertex AIåˆæœŸåŒ–ãƒ†ã‚¹ãƒˆ")
    try:
        from google.cloud import aiplatform
        aiplatform.init(project=project, location="us-central1")
        print("âœ… Vertex AIåˆæœŸåŒ–æˆåŠŸ")
    except Exception as e:
        print(f"âŒ Vertex AIåˆæœŸåŒ–å¤±æ•—: {e}")
        return
    
    # Step 3: ãƒ¢ãƒ‡ãƒ«æ¥ç¶šãƒ†ã‚¹ãƒˆ
    print("\nStep 3: ãƒ¢ãƒ‡ãƒ«æ¥ç¶šãƒ†ã‚¹ãƒˆ")
    try:
        model = aiplatform.gapic.PredictionServiceClient()
        print("âœ… ãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½œæˆæˆåŠŸ")
    except Exception as e:
        print(f"âŒ ãƒ¢ãƒ‡ãƒ«æ¥ç¶šå¤±æ•—: {e}")
        return
    
    print("\nğŸ‰ å…¨ã¦ã®æ¥ç¶šãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ã¾ã—ãŸ")

if __name__ == "__main__":
    test_connection_step_by_step()
```

</details>

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **[RAGå®Ÿè£…ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚¬ã‚¤ãƒ‰](./rag_best_practice.md)** - å®Ÿè£…æ™‚ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ãªã©ã®è©³ç´°ãªã‚¬ã‚¤ãƒ‰

---

**é‡è¦**: ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ã€Google Cloud Projectã§ã®Vertex AI APIæœ‰åŠ¹åŒ–ã¨é©åˆ‡ãªèªè¨¼è¨­å®šãŒå¿…è¦ã§ã™ã€‚ä¸Šè¨˜ã®ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰ã«å¾“ã£ã¦è¨­å®šã‚’è¡Œã£ã¦ãã ã•ã„ã€‚
